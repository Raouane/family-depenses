---
name: seniorsstack
description: This is a new rule
---

# Overview


# Senior React/Next.js/Node/PostgreSQL Rules & Standards

## ğŸ¯ Principes Fondamentaux
- **ZÃ©ro Logique MÃ©tier dans le JSX** : Le JSX est exclusivement rÃ©servÃ© au rendu. Toute logique (calculs, filtrage, formatage) doit Ãªtre extraite au-dessus du `return` ou dans des hooks/utilitaires.
- **Approche "Server-First"** : Utiliser les React Server Components (RSC) par dÃ©faut. RÃ©server `'use client'` aux composants strictement interactifs.
- **Type Safety Absolu** : Aucun `any`. Utiliser la validation Zod pour chaque entrÃ©e/sortie de donnÃ©es.

---

## ğŸ— Architecture & Structure de Code
- **Structure des Dossiers** :
  - `components/ui` : Composants atomiques Shadcn (ne pas modifier directement).
  - `components/features` : Composants riches avec logique mÃ©tier isolÃ©e.
  - `actions/` : Server Actions pour toutes les mutations et accÃ¨s DB.
  - `hooks/` : Logique d'Ã©tat client et rÃ©utilisable.
  - `lib/` : Clients (Prisma, S3, etc.) et fonctions pures.
- **Composants Propres** : 
  - Extraire les fonctions de gestion (`handleX`) du JSX.
  - Utiliser des variables dÃ©rivÃ©es (ex: `const isEnabled = ...`) plutÃ´t que des conditions complexes inline.
  - Favoriser la composition : `<Component>{children}</Component>`.

---

## ğŸ—„ Backend & Base de donnÃ©es (Node.js/PostgreSQL)
- **Data Access** : Utiliser Prisma pour toutes les interactions PostgreSQL.
- **Transactions** : Utiliser `prisma.$transaction` pour toute opÃ©ration impliquant plusieurs tables.
- **SÃ©curitÃ©** : 
  - Validation systÃ©matique via `zod` Ã  l'entrÃ©e des Server Actions.
  - VÃ©rifier l'authentification et les permissions avant toute requÃªte DB.
- **Performance** : Utiliser `select` pour Ã©viter de rÃ©cupÃ©rer des colonnes inutiles (ex: mots de passe, gros blobs).

---

## ğŸ¨ UI & UX (Shadcn UI & Tailwind)
- **Styles** : Utiliser exclusivement Tailwind CSS. Ne jamais utiliser de styles inline.
- **Design System** : Respecter scrupuleusement les variables de thÃ¨me Shadcn (`primary`, `secondary`, `muted`).
- **AccessibilitÃ©** : Maintenir les attributs ARIA fournis par Radix UI. 
- **Ã‰tats de chargement** : Utiliser `loading.tsx` (Next.js) ou `Suspense` plutÃ´t que des spinners gÃ©rÃ©s manuellement dans le JSX.

---

## ğŸ›  Standards de DÃ©veloppement
- **Gestion d'Erreurs** : Utiliser des blocs `try/catch` dans les Server Actions et renvoyer un objet standard `{ success: boolean, data?: T, error?: string }`.
- **Imports** : Utiliser les alias `@/` (ex: `@/components/ui/button`). Organiser les imports : React en premier, Next ensuite, librairies tierces, puis local.
- **Clean Code** : 
  - Fonctions courtes et mono-responsables.
  - Utiliser les "Early Returns" pour Ã©viter l'imbrication (`if (!user) return null`).
  - PrÃ©fÃ©rer `const` Ã  `let`.

---

## ğŸ¤– Instructions pour l'IA (Cursor)
- **Refactoring** : Si tu vois de la logique mÃ©tier dans un `return` JSX, propose immÃ©diatement de l'extraire.
- **Typage** : Si tu gÃ©nÃ¨res un type, vÃ©rifie s'il peut Ãªtre dÃ©duit de Prisma ou d'un schÃ©ma Zod existant.
- **Explication** : Toujours justifier un choix architectural s'il dÃ©vie de ces rÃ¨gles.
